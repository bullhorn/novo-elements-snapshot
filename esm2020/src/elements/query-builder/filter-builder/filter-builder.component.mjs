import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ContentChildren, Directive, ElementRef, Input, QueryList, ViewChild, ViewContainerRef, } from '@angular/core';
import { ControlContainer, FormControl } from '@angular/forms';
import { Subject } from 'rxjs';
import { debounceTime, distinctUntilChanged } from 'rxjs/operators';
import { NOVO_FILTER_BUILDER } from '../query-builder.tokens';
import { NovoFilterFieldDef, NovoFilterFieldTypeDef } from './base-filter-field.definition';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
import * as i2 from "../../flex/Grid";
import * as i3 from "../../field/field";
import * as i4 from "../../select/Select";
import * as i5 from "../../tabs/Tabs";
import * as i6 from "../../search/SearchBox";
import * as i7 from "../../common/option/option.component";
import * as i8 from "../../non-ideal-state/NonIdealState";
import * as i9 from "../../loading/Loading";
import * as i10 from "../../common/directives/space.directive";
import * as i11 from "../../common/directives/theme.directive";
import * as i12 from "@angular/common";
/**
 * Provides a handle for the table to grab the view container's ng-container to insert data rows.
 * @docs-private
 */
export class QueryFilterInputOutlet {
    constructor(viewContainer, elementRef) {
        this.viewContainer = viewContainer;
        this.elementRef = elementRef;
    }
}
QueryFilterInputOutlet.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.3.0", ngImport: i0, type: QueryFilterInputOutlet, deps: [{ token: i0.ViewContainerRef }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });
QueryFilterInputOutlet.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "13.3.0", type: QueryFilterInputOutlet, selector: "[queryFilterInputOutlet]", ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.3.0", ngImport: i0, type: QueryFilterInputOutlet, decorators: [{
            type: Directive,
            args: [{ selector: '[queryFilterInputOutlet]' }]
        }], ctorParameters: function () { return [{ type: i0.ViewContainerRef }, { type: i0.ElementRef }]; } });
/**
 * Provides a handle for the table to grab the view container's ng-container to insert data rows.
 * @docs-private
 */
export class QueryFilterOperatorOutlet {
    constructor(viewContainer, elementRef) {
        this.viewContainer = viewContainer;
        this.elementRef = elementRef;
    }
}
QueryFilterOperatorOutlet.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.3.0", ngImport: i0, type: QueryFilterOperatorOutlet, deps: [{ token: i0.ViewContainerRef }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });
QueryFilterOperatorOutlet.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "13.3.0", type: QueryFilterOperatorOutlet, selector: "[queryFilterOperatorOutlet]", ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.3.0", ngImport: i0, type: QueryFilterOperatorOutlet, decorators: [{
            type: Directive,
            args: [{ selector: '[queryFilterOperatorOutlet]' }]
        }], ctorParameters: function () { return [{ type: i0.ViewContainerRef }, { type: i0.ElementRef }]; } });
export const defaultEditTypeFn = (field) => {
    return (field.inputType || field.dataType || field.type).toLowerCase();
};
export class FilterBuilderComponent {
    constructor(controlContainer, cdr) {
        this.controlContainer = controlContainer;
        this.cdr = cdr;
        this.config = { fields: [] };
        this.editTypeFn = defaultEditTypeFn;
        this.searchTerm = new FormControl();
        this._lastContext = {};
        this._customFieldDefs = new Set();
        this._fieldDefsByName = new Map();
        /** Subject that emits when the component has been destroyed. */
        this._onDestroy = new Subject();
    }
    ngOnInit() {
        this.parentForm = this.controlContainer.control;
    }
    ngAfterContentInit() {
        const { fields = [] } = this.config || {};
        fields.length && this.changeFieldOptions(fields[0]);
        this.searches = this.searchTerm.valueChanges.pipe(debounceTime(300), distinctUntilChanged()).subscribe((term) => {
            this.results$ = Promise.resolve(this.fieldConfig.options.filter((f) => f.name.toLowerCase().includes(term.toLowerCase()) || f.label?.toLowerCase().includes(term.toLowerCase())));
            this.cdr.markForCheck();
        });
    }
    ngAfterContentChecked() {
        this._cacheFieldDefs();
    }
    ngOnDestroy() {
        this.searches.unsubscribe();
        // Clear all outlets and Maps
        [this._operatorOutlet.viewContainer, this._inputOutlet.viewContainer, this._customFieldDefs, this._fieldDefsByName].forEach((def) => {
            def.clear();
        });
        // this._contentFieldTypeDefs = [];
        // this._contentFieldDefs = [];
        this._onDestroy.next();
        this._onDestroy.complete();
    }
    /**
     * Updates the Conditions "Field" Options to Change base on new Scope
     * @param fieldConfig
     */
    changeFieldOptions(fieldConfig) {
        // this.fields = entity.filter(term);
        this.fieldConfig = fieldConfig;
        this.searchTerm.setValue('');
        this.results$ = Promise.resolve(this.fieldConfig.options);
    }
    getField() {
        const { field } = this.parentForm?.value;
        if (!field)
            return null;
        const fieldName = field.split('.')[1];
        return this.fieldConfig.find(fieldName);
    }
    getDefaultField() {
        const fields = this.fieldConfig.options;
        if (fields && fields.length) {
            return fields[0].name;
        }
        return null;
    }
    onFieldSelect() {
        const fieldConf = this.getField();
        if (!fieldConf) {
            this.parentForm.get('field').setValue(this.getDefaultField());
            console.warn(`No field found for field '${fieldConf.name}'. `);
            return;
        }
        const { field, operator } = this.parentForm.value;
        if (this._lastContext.field !== field) {
            this.createFieldTemplates();
        }
        if (this._lastContext.operator !== operator) {
            this.parentForm.get('value').setValue(null);
        }
        this._lastContext = { ...this.parentForm.value };
        this.cdr.markForCheck();
    }
    /** Adds a field definition that was not included as part of the content children. */
    addFieldDef(fieldDef) {
        this._customFieldDefs.add(fieldDef);
    }
    /** Removes a field definition that was not included as part of the content children. */
    removeFieldDef(fieldDef) {
        this._customFieldDefs.delete(fieldDef);
    }
    _cacheFieldDefs() {
        this._fieldDefsByName.clear();
        const defs = [
            // Dynamically Added Definitions
            ...Array.from(this._customFieldDefs),
            // Definitions added as Content
            ...Array.from(this._contentFieldTypeDefs),
            ...Array.from(this._contentFieldDefs),
        ];
        defs.forEach((fieldDef) => {
            if (this._fieldDefsByName.has(fieldDef.name)) {
                // throw new Error(`duplicate field name for ${fieldDef.name}`);
                console.warn(`duplicate field name for ${fieldDef.name}`);
            }
            this._fieldDefsByName.set(fieldDef.name, fieldDef);
        });
    }
    findDefinitionForField(field) {
        if (!field)
            return;
        const editType = this.editTypeFn(field);
        // Don't look at dataSpecialization it is no good, this misses currency, and percent
        const { name, inputType, dataType, type } = field;
        // Check Fields by priority for match Field Definition
        const key = [name, editType, inputType, dataType, type, 'default'].find((it) => this._fieldDefsByName.has(it));
        // console.log('looking for input', name, inputType, dataSpecialization, dataType, type, this._fieldDefsByName);
        return this._fieldDefsByName.get(key);
    }
    createFieldTemplates() {
        const definition = this.findDefinitionForField(this.getField());
        console.log('found def', definition);
        this.parentForm.get('operator').setValue(definition.defaultOperator);
        this.parentForm.get('value').setValue(null);
        this.createFieldOperators(definition);
        this.createFieldInput(definition);
    }
    createFieldOperators(definition) {
        this._operatorOutlet.viewContainer.clear();
        if (definition) {
            const context = { $implicit: this.parentForm, fieldMeta: this.getField() };
            this._operatorOutlet.viewContainer.createEmbeddedView(definition.fieldOperators.template, context);
        }
        this.cdr.markForCheck();
    }
    createFieldInput(definition) {
        this._inputOutlet.viewContainer.clear();
        if (definition) {
            const context = { $implicit: this.parentForm, fieldMeta: this.getField() };
            this._inputOutlet.viewContainer.createEmbeddedView(definition.fieldInput.template, context);
        }
        this.cdr.markForCheck();
    }
}
FilterBuilderComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.3.0", ngImport: i0, type: FilterBuilderComponent, deps: [{ token: i1.ControlContainer }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
FilterBuilderComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.3.0", type: FilterBuilderComponent, selector: "novo-filter-builder", inputs: { label: "label", config: "config", editTypeFn: "editTypeFn" }, providers: [{ provide: NOVO_FILTER_BUILDER, useExisting: FilterBuilderComponent }], queries: [{ propertyName: "_contentFieldTypeDefs", predicate: NovoFilterFieldTypeDef, descendants: true }, { propertyName: "_contentFieldDefs", predicate: NovoFilterFieldDef, descendants: true }], viewQueries: [{ propertyName: "_operatorOutlet", first: true, predicate: QueryFilterOperatorOutlet, descendants: true, static: true }, { propertyName: "_inputOutlet", first: true, predicate: QueryFilterInputOutlet, descendants: true, static: true }], ngImport: i0, template: "<form [formGroup]=\"parentForm\">\n  <novo-grid gap=\"1rem\" columns=\"16rem 10rem 1fr\">\n    <novo-field class=\"condition-field\">\n      <novo-select\n        placeholder=\"Choose a field...\"\n        formControlName=\"field\"\n        (onSelect)=\"onFieldSelect()\"\n        overlayWidth=\"auto\"\n        overlayHeight=\"auto\"\n        [style.minWidth.px]=\"160\">\n        <div class=\"field-select-picker\">\n          <novo-nav theme=\"white\" direction=\"vertical\">\n            <novo-tab *ngFor=\"let entity of config?.fields\" (activeChange)=\"changeFieldOptions(entity)\">\n              {{ entity.label }}\n            </novo-tab>\n          </novo-nav>\n          <div class=\"filter-search-results\">\n            <novo-search alwaysOpen=\"true\" [formControl]=\"searchTerm\"></novo-search>\n            <ng-container *ngIf=\"results$ | async as results; else loading\">\n              <ng-container *ngIf=\"results.length; else empty\">\n                <novo-option *ngFor=\"let field of results\" value=\"{{ fieldConfig.value }}.{{ field.name }}\">\n                  {{ field.label || field.name }}\n                </novo-option>\n              </ng-container>\n              <!-- EMPTY STATE TEMPLATE -->\n              <ng-template #empty>\n                <novo-non-ideal-state\n                  icon=\"search\"\n                  title=\"No results found.\"\n                  description=\"Your search didn't find anything. Try searching for something else.\">\n                </novo-non-ideal-state>\n              </ng-template>\n            </ng-container>\n            <!-- LOADING TEMPLATE -->\n            <ng-template #loading>\n              <novo-loading></novo-loading>\n            </ng-template>\n          </div>\n        </div>\n      </novo-select>\n    </novo-field>\n\n    <div class=\"condition-operator\">\n      <ng-container queryFilterOperatorOutlet></ng-container>\n    </div>\n\n    <div class=\"condition-value\">\n      <ng-container queryFilterInputOutlet></ng-container>\n    </div>\n  </novo-grid>\n</form>", styles: [":host{position:relative;display:block;width:100%}:host .condition-operator::ng-deep .novo-select{min-width:10rem!important}:host .and-or-filter-button{box-sizing:border-box;background:#fff;border:1px solid #ddd;color:#5691f5;display:inline-block;position:relative;cursor:pointer;margin:.4rem auto;align-items:center;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;outline:none;white-space:nowrap;text-transform:uppercase;overflow:hidden;transition:box-shadow .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1)}.field-select-picker{display:grid;grid-template-columns:-webkit-min-content 1fr;grid-template-columns:min-content 1fr;background-color:#fff;overflow:auto;box-shadow:0 1px 2px #00000026;height:219px;width:32rem}.field-select-picker .filter-search-results{border-left:1px solid #dbdbdb;height:100%;overflow-y:scroll}\n"], components: [{ type: i2.NovoGridElement, selector: "novo-grid", inputs: ["direction", "align", "justify", "columns"] }, { type: i3.NovoFieldElement, selector: "novo-field", inputs: ["layout", "appearance", "width"] }, { type: i4.NovoSelectElement, selector: "novo-select", inputs: ["disabled", "required", "tabIndex", "id", "name", "options", "placeholder", "readonly", "headerConfig", "position", "overlayWidth", "overlayHeight", "displayWith", "compareWith", "value", "multiple"], outputs: ["onSelect", "selectionChange", "valueChange", "openedChange", "opened", "closed"] }, { type: i5.NovoNavElement, selector: "novo-nav", inputs: ["theme", "direction", "outlet", "router", "condensed", "selectedIndex"], outputs: ["selectedIndexChange"] }, { type: i5.NovoTabElement, selector: "novo-tab", inputs: ["active", "color", "disabled"], outputs: ["activeChange"] }, { type: i6.NovoSearchBoxElement, selector: "novo-search", inputs: ["name", "icon", "position", "placeholder", "alwaysOpen", "theme", "color", "closeOnSelect", "displayField", "displayValue", "hint", "keepOpen"], outputs: ["searchChanged", "applySearch"] }, { type: i7.NovoOption, selector: "novo-option", inputs: ["selected", "keepOpen", "inert", "value", "disabled"], exportAs: ["novoOption"] }, { type: i8.NonIdealStateElement, selector: "novo-non-ideal-state", inputs: ["theme", "icon", "title", "description"] }, { type: i9.NovoLoadingElement, selector: "novo-loading", inputs: ["theme", "color", "size"] }], directives: [{ type: i1.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { type: i1.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { type: i1.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { type: i10.GapDirective, selector: "[gap]", inputs: ["gap"] }, { type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i1.FormControlName, selector: "[formControlName]", inputs: ["formControlName", "disabled", "ngModel"], outputs: ["ngModelChange"] }, { type: i11.ThemeColorDirective, selector: "[theme]", inputs: ["theme"] }, { type: i12.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i1.FormControlDirective, selector: "[formControl]", inputs: ["formControl", "disabled", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { type: i12.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: QueryFilterOperatorOutlet, selector: "[queryFilterOperatorOutlet]" }, { type: QueryFilterInputOutlet, selector: "[queryFilterInputOutlet]" }], pipes: { "async": i12.AsyncPipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.3.0", ngImport: i0, type: FilterBuilderComponent, decorators: [{
            type: Component,
            args: [{ selector: 'novo-filter-builder', providers: [{ provide: NOVO_FILTER_BUILDER, useExisting: FilterBuilderComponent }], changeDetection: ChangeDetectionStrategy.OnPush, template: "<form [formGroup]=\"parentForm\">\n  <novo-grid gap=\"1rem\" columns=\"16rem 10rem 1fr\">\n    <novo-field class=\"condition-field\">\n      <novo-select\n        placeholder=\"Choose a field...\"\n        formControlName=\"field\"\n        (onSelect)=\"onFieldSelect()\"\n        overlayWidth=\"auto\"\n        overlayHeight=\"auto\"\n        [style.minWidth.px]=\"160\">\n        <div class=\"field-select-picker\">\n          <novo-nav theme=\"white\" direction=\"vertical\">\n            <novo-tab *ngFor=\"let entity of config?.fields\" (activeChange)=\"changeFieldOptions(entity)\">\n              {{ entity.label }}\n            </novo-tab>\n          </novo-nav>\n          <div class=\"filter-search-results\">\n            <novo-search alwaysOpen=\"true\" [formControl]=\"searchTerm\"></novo-search>\n            <ng-container *ngIf=\"results$ | async as results; else loading\">\n              <ng-container *ngIf=\"results.length; else empty\">\n                <novo-option *ngFor=\"let field of results\" value=\"{{ fieldConfig.value }}.{{ field.name }}\">\n                  {{ field.label || field.name }}\n                </novo-option>\n              </ng-container>\n              <!-- EMPTY STATE TEMPLATE -->\n              <ng-template #empty>\n                <novo-non-ideal-state\n                  icon=\"search\"\n                  title=\"No results found.\"\n                  description=\"Your search didn't find anything. Try searching for something else.\">\n                </novo-non-ideal-state>\n              </ng-template>\n            </ng-container>\n            <!-- LOADING TEMPLATE -->\n            <ng-template #loading>\n              <novo-loading></novo-loading>\n            </ng-template>\n          </div>\n        </div>\n      </novo-select>\n    </novo-field>\n\n    <div class=\"condition-operator\">\n      <ng-container queryFilterOperatorOutlet></ng-container>\n    </div>\n\n    <div class=\"condition-value\">\n      <ng-container queryFilterInputOutlet></ng-container>\n    </div>\n  </novo-grid>\n</form>", styles: [":host{position:relative;display:block;width:100%}:host .condition-operator::ng-deep .novo-select{min-width:10rem!important}:host .and-or-filter-button{box-sizing:border-box;background:#fff;border:1px solid #ddd;color:#5691f5;display:inline-block;position:relative;cursor:pointer;margin:.4rem auto;align-items:center;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;outline:none;white-space:nowrap;text-transform:uppercase;overflow:hidden;transition:box-shadow .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1)}.field-select-picker{display:grid;grid-template-columns:-webkit-min-content 1fr;grid-template-columns:min-content 1fr;background-color:#fff;overflow:auto;box-shadow:0 1px 2px #00000026;height:219px;width:32rem}.field-select-picker .filter-search-results{border-left:1px solid #dbdbdb;height:100%;overflow-y:scroll}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.ControlContainer }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { _operatorOutlet: [{
                type: ViewChild,
                args: [QueryFilterOperatorOutlet, { static: true }]
            }], _inputOutlet: [{
                type: ViewChild,
                args: [QueryFilterInputOutlet, { static: true }]
            }], _contentFieldTypeDefs: [{
                type: ContentChildren,
                args: [NovoFilterFieldTypeDef, { descendants: true }]
            }], _contentFieldDefs: [{
                type: ContentChildren,
                args: [NovoFilterFieldDef, { descendants: true }]
            }], label: [{
                type: Input
            }], config: [{
                type: Input
            }], editTypeFn: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsdGVyLWJ1aWxkZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbm92by1lbGVtZW50cy9zcmMvZWxlbWVudHMvcXVlcnktYnVpbGRlci9maWx0ZXItYnVpbGRlci9maWx0ZXItYnVpbGRlci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9ub3ZvLWVsZW1lbnRzL3NyYy9lbGVtZW50cy9xdWVyeS1idWlsZGVyL2ZpbHRlci1idWlsZGVyL2ZpbHRlci1idWlsZGVyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFHTCx1QkFBdUIsRUFDdkIsaUJBQWlCLEVBQ2pCLFNBQVMsRUFDVCxlQUFlLEVBQ2YsU0FBUyxFQUNULFVBQVUsRUFDVixLQUFLLEVBR0wsU0FBUyxFQUNULFNBQVMsRUFDVCxnQkFBZ0IsR0FDakIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFtQixnQkFBZ0IsRUFBRSxXQUFXLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNoRixPQUFPLEVBQUUsT0FBTyxFQUFnQixNQUFNLE1BQU0sQ0FBQztBQUM3QyxPQUFPLEVBQUUsWUFBWSxFQUFFLG9CQUFvQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDcEUsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDOUQsT0FBTyxFQUFzQixrQkFBa0IsRUFBRSxzQkFBc0IsRUFBRSxNQUFNLGdDQUFnQyxDQUFDOzs7Ozs7Ozs7Ozs7OztBQW1DaEg7OztHQUdHO0FBRUgsTUFBTSxPQUFPLHNCQUFzQjtJQUNqQyxZQUFtQixhQUErQixFQUFTLFVBQXNCO1FBQTlELGtCQUFhLEdBQWIsYUFBYSxDQUFrQjtRQUFTLGVBQVUsR0FBVixVQUFVLENBQVk7SUFBRyxDQUFDOzttSEFEMUUsc0JBQXNCO3VHQUF0QixzQkFBc0I7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ImltcG9ydCB7XG4gIEFmdGVyQ29udGVudENoZWNrZWQsXG4gIEFmdGVyQ29udGVudEluaXQsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgQ29tcG9uZW50LFxuICBDb250ZW50Q2hpbGRyZW4sXG4gIERpcmVjdGl2ZSxcbiAgRWxlbWVudFJlZixcbiAgSW5wdXQsXG4gIE9uRGVzdHJveSxcbiAgT25Jbml0LFxuICBRdWVyeUxpc3QsXG4gIFZpZXdDaGlsZCxcbiAgVmlld0NvbnRhaW5lclJlZixcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBYnN0cmFjdENvbnRyb2wsIENvbnRyb2xDb250YWluZXIsIEZvcm1Db250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgU3ViamVjdCwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBkZWJvdW5jZVRpbWUsIGRpc3RpbmN0VW50aWxDaGFuZ2VkIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgTk9WT19GSUxURVJfQlVJTERFUiB9IGZyb20gJy4uL3F1ZXJ5LWJ1aWxkZXIudG9rZW5zJztcbmltcG9ydCB7IEJhc2VGaWx0ZXJGaWVsZERlZiwgTm92b0ZpbHRlckZpZWxkRGVmLCBOb3ZvRmlsdGVyRmllbGRUeXBlRGVmIH0gZnJvbSAnLi9iYXNlLWZpbHRlci1maWVsZC5kZWZpbml0aW9uJztcblxuZXhwb3J0IGludGVyZmFjZSBDb25kaXRpb24ge1xuICBmaWVsZDogc3RyaW5nO1xuICBvcGVyYXRvcjogc3RyaW5nO1xuICB2YWx1ZTogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VGaWVsZERlZiB7XG4gIG5hbWU6IHN0cmluZztcbiAgbGFiZWw/OiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbiAgZGF0YVNwZWNpYWxpemF0aW9uPzogc3RyaW5nO1xuICBvcHRpb25hbD86IGJvb2xlYW47XG4gIG11bHRpVmFsdWU/OiBib29sZWFuO1xuICBpbnB1dFR5cGU/OiBzdHJpbmc7XG4gIG9wdGlvbnM/OiB7IHZhbHVlOiBzdHJpbmcgfCBudW1iZXI7IGxhYmVsOiBzdHJpbmc7IHJlYWRPbmx5PzogYm9vbGVhbiB9W107XG4gIG9wdGlvbnNVcmw/OiBzdHJpbmc7XG4gIG9wdGlvbnNUeXBlPzogc3RyaW5nO1xuICBkYXRhVHlwZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWVsZENvbmZpZzxUIGV4dGVuZHMgQmFzZUZpZWxkRGVmPiB7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIG9wdGlvbnM6IFRbXTtcbiAgc2VhcmNoOiAodGVybTogc3RyaW5nKSA9PiBUW107XG4gIGZpbmQ6IChuYW1lOiBzdHJpbmcpID0+IFQ7XG59XG5cbi8qKiBJbnRlcmZhY2UgdXNlZCB0byBwcm92aWRlIGFuIG91dGxldCBmb3Igcm93cyB0byBiZSBpbnNlcnRlZCBpbnRvLiAqL1xuZXhwb3J0IGludGVyZmFjZSBRdWVyeUZpbHRlck91dGxldCB7XG4gIHZpZXdDb250YWluZXI6IFZpZXdDb250YWluZXJSZWY7XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYSBoYW5kbGUgZm9yIHRoZSB0YWJsZSB0byBncmFiIHRoZSB2aWV3IGNvbnRhaW5lcidzIG5nLWNvbnRhaW5lciB0byBpbnNlcnQgZGF0YSByb3dzLlxuICogQGRvY3MtcHJpdmF0ZVxuICovXG5ARGlyZWN0aXZlKHsgc2VsZWN0b3I6ICdbcXVlcnlGaWx0ZXJJbnB1dE91dGxldF0nIH0pXG5leHBvcnQgY2xhc3MgUXVlcnlGaWx0ZXJJbnB1dE91dGxldCBpbXBsZW1lbnRzIFF1ZXJ5RmlsdGVyT3V0bGV0IHtcbiAgY29uc3RydWN0b3IocHVibGljIHZpZXdDb250YWluZXI6IFZpZXdDb250YWluZXJSZWYsIHB1YmxpYyBlbGVtZW50UmVmOiBFbGVtZW50UmVmKSB7fVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGEgaGFuZGxlIGZvciB0aGUgdGFibGUgdG8gZ3JhYiB0aGUgdmlldyBjb250YWluZXIncyBuZy1jb250YWluZXIgdG8gaW5zZXJ0IGRhdGEgcm93cy5cbiAqIEBkb2NzLXByaXZhdGVcbiAqL1xuQERpcmVjdGl2ZSh7IHNlbGVjdG9yOiAnW3F1ZXJ5RmlsdGVyT3BlcmF0b3JPdXRsZXRdJyB9KVxuZXhwb3J0IGNsYXNzIFF1ZXJ5RmlsdGVyT3BlcmF0b3JPdXRsZXQgaW1wbGVtZW50cyBRdWVyeUZpbHRlck91dGxldCB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyB2aWV3Q29udGFpbmVyOiBWaWV3Q29udGFpbmVyUmVmLCBwdWJsaWMgZWxlbWVudFJlZjogRWxlbWVudFJlZikge31cbn1cblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRFZGl0VHlwZUZuID0gKGZpZWxkOiBCYXNlRmllbGREZWYpID0+IHtcbiAgcmV0dXJuIChmaWVsZC5pbnB1dFR5cGUgfHwgZmllbGQuZGF0YVR5cGUgfHwgZmllbGQudHlwZSkudG9Mb3dlckNhc2UoKTtcbn07XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25vdm8tZmlsdGVyLWJ1aWxkZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vZmlsdGVyLWJ1aWxkZXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9maWx0ZXItYnVpbGRlci5jb21wb25lbnQuc2NzcyddLFxuICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IE5PVk9fRklMVEVSX0JVSUxERVIsIHVzZUV4aXN0aW5nOiBGaWx0ZXJCdWlsZGVyQ29tcG9uZW50IH1dLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbn0pXG5leHBvcnQgY2xhc3MgRmlsdGVyQnVpbGRlckNvbXBvbmVudDxUIGV4dGVuZHMgQmFzZUZpZWxkRGVmPiBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJDb250ZW50SW5pdCwgQWZ0ZXJDb250ZW50Q2hlY2tlZCwgT25EZXN0cm95IHtcbiAgQFZpZXdDaGlsZChRdWVyeUZpbHRlck9wZXJhdG9yT3V0bGV0LCB7IHN0YXRpYzogdHJ1ZSB9KSBfb3BlcmF0b3JPdXRsZXQ6IFF1ZXJ5RmlsdGVyT3BlcmF0b3JPdXRsZXQ7XG4gIEBWaWV3Q2hpbGQoUXVlcnlGaWx0ZXJJbnB1dE91dGxldCwgeyBzdGF0aWM6IHRydWUgfSkgX2lucHV0T3V0bGV0OiBRdWVyeUZpbHRlcklucHV0T3V0bGV0O1xuICBAQ29udGVudENoaWxkcmVuKE5vdm9GaWx0ZXJGaWVsZFR5cGVEZWYsIHsgZGVzY2VuZGFudHM6IHRydWUgfSkgX2NvbnRlbnRGaWVsZFR5cGVEZWZzOiBRdWVyeUxpc3Q8Tm92b0ZpbHRlckZpZWxkVHlwZURlZj47XG4gIEBDb250ZW50Q2hpbGRyZW4oTm92b0ZpbHRlckZpZWxkRGVmLCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0pIF9jb250ZW50RmllbGREZWZzOiBRdWVyeUxpc3Q8Tm92b0ZpbHRlckZpZWxkRGVmPjtcblxuICBASW5wdXQoKSBsYWJlbDogYW55O1xuICBASW5wdXQoKSBjb25maWc6IHsgZmllbGRzOiBGaWVsZENvbmZpZzxUPltdIH0gPSB7IGZpZWxkczogW10gfTtcbiAgQElucHV0KCkgZWRpdFR5cGVGbjogKGZpZWxkOiBCYXNlRmllbGREZWYpID0+IHN0cmluZyA9IGRlZmF1bHRFZGl0VHlwZUZuO1xuXG4gIHB1YmxpYyBwYXJlbnRGb3JtOiBBYnN0cmFjdENvbnRyb2w7XG4gIHB1YmxpYyBmaWVsZENvbmZpZzogRmllbGRDb25maWc8VD47XG4gIHB1YmxpYyBzZWFyY2hlcyE6IFN1YnNjcmlwdGlvbjtcbiAgcHVibGljIHJlc3VsdHMkOiBQcm9taXNlPGFueVtdPjtcbiAgcHVibGljIHNlYXJjaFRlcm06IEZvcm1Db250cm9sID0gbmV3IEZvcm1Db250cm9sKCk7XG5cbiAgcHJpdmF0ZSBfbGFzdENvbnRleHQ6IGFueSA9IHt9O1xuICBwcml2YXRlIF9jdXN0b21GaWVsZERlZnMgPSBuZXcgU2V0PEJhc2VGaWx0ZXJGaWVsZERlZj4oKTtcbiAgcHJpdmF0ZSBfZmllbGREZWZzQnlOYW1lID0gbmV3IE1hcDxzdHJpbmcsIEJhc2VGaWx0ZXJGaWVsZERlZj4oKTtcblxuICAvKiogU3ViamVjdCB0aGF0IGVtaXRzIHdoZW4gdGhlIGNvbXBvbmVudCBoYXMgYmVlbiBkZXN0cm95ZWQuICovXG4gIHByaXZhdGUgcmVhZG9ubHkgX29uRGVzdHJveSA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjb250cm9sQ29udGFpbmVyOiBDb250cm9sQ29udGFpbmVyLCBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYpIHt9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5wYXJlbnRGb3JtID0gdGhpcy5jb250cm9sQ29udGFpbmVyLmNvbnRyb2w7XG4gIH1cblxuICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XG4gICAgY29uc3QgeyBmaWVsZHMgPSBbXSB9ID0gdGhpcy5jb25maWcgfHwge307XG4gICAgZmllbGRzLmxlbmd0aCAmJiB0aGlzLmNoYW5nZUZpZWxkT3B0aW9ucyhmaWVsZHNbMF0pO1xuICAgIHRoaXMuc2VhcmNoZXMgPSB0aGlzLnNlYXJjaFRlcm0udmFsdWVDaGFuZ2VzLnBpcGUoZGVib3VuY2VUaW1lKDMwMCksIGRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpLnN1YnNjcmliZSgodGVybSkgPT4ge1xuICAgICAgdGhpcy5yZXN1bHRzJCA9IFByb21pc2UucmVzb2x2ZShcbiAgICAgICAgdGhpcy5maWVsZENvbmZpZy5vcHRpb25zLmZpbHRlcihcbiAgICAgICAgICAoZikgPT4gZi5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGVybS50b0xvd2VyQ2FzZSgpKSB8fCBmLmxhYmVsPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRlcm0udG9Mb3dlckNhc2UoKSksXG4gICAgICAgICksXG4gICAgICApO1xuICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgfSk7XG4gIH1cblxuICBuZ0FmdGVyQ29udGVudENoZWNrZWQoKSB7XG4gICAgdGhpcy5fY2FjaGVGaWVsZERlZnMoKTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuc2VhcmNoZXMudW5zdWJzY3JpYmUoKTtcbiAgICAvLyBDbGVhciBhbGwgb3V0bGV0cyBhbmQgTWFwc1xuICAgIFt0aGlzLl9vcGVyYXRvck91dGxldC52aWV3Q29udGFpbmVyLCB0aGlzLl9pbnB1dE91dGxldC52aWV3Q29udGFpbmVyLCB0aGlzLl9jdXN0b21GaWVsZERlZnMsIHRoaXMuX2ZpZWxkRGVmc0J5TmFtZV0uZm9yRWFjaCgoZGVmKSA9PiB7XG4gICAgICBkZWYuY2xlYXIoKTtcbiAgICB9KTtcbiAgICAvLyB0aGlzLl9jb250ZW50RmllbGRUeXBlRGVmcyA9IFtdO1xuICAgIC8vIHRoaXMuX2NvbnRlbnRGaWVsZERlZnMgPSBbXTtcbiAgICB0aGlzLl9vbkRlc3Ryb3kubmV4dCgpO1xuICAgIHRoaXMuX29uRGVzdHJveS5jb21wbGV0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIENvbmRpdGlvbnMgXCJGaWVsZFwiIE9wdGlvbnMgdG8gQ2hhbmdlIGJhc2Ugb24gbmV3IFNjb3BlXG4gICAqIEBwYXJhbSBmaWVsZENvbmZpZ1xuICAgKi9cbiAgY2hhbmdlRmllbGRPcHRpb25zKGZpZWxkQ29uZmlnOiBGaWVsZENvbmZpZzxUPikge1xuICAgIC8vIHRoaXMuZmllbGRzID0gZW50aXR5LmZpbHRlcih0ZXJtKTtcbiAgICB0aGlzLmZpZWxkQ29uZmlnID0gZmllbGRDb25maWc7XG4gICAgdGhpcy5zZWFyY2hUZXJtLnNldFZhbHVlKCcnKTtcbiAgICB0aGlzLnJlc3VsdHMkID0gUHJvbWlzZS5yZXNvbHZlKHRoaXMuZmllbGRDb25maWcub3B0aW9ucyk7XG4gIH1cblxuICBnZXRGaWVsZCgpIHtcbiAgICBjb25zdCB7IGZpZWxkIH0gPSB0aGlzLnBhcmVudEZvcm0/LnZhbHVlO1xuICAgIGlmICghZmllbGQpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGZpZWxkTmFtZSA9IGZpZWxkLnNwbGl0KCcuJylbMV07XG4gICAgcmV0dXJuIHRoaXMuZmllbGRDb25maWcuZmluZChmaWVsZE5hbWUpO1xuICB9XG5cbiAgZ2V0RGVmYXVsdEZpZWxkKCkge1xuICAgIGNvbnN0IGZpZWxkcyA9IHRoaXMuZmllbGRDb25maWcub3B0aW9ucztcbiAgICBpZiAoZmllbGRzICYmIGZpZWxkcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmaWVsZHNbMF0ubmFtZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBvbkZpZWxkU2VsZWN0KCkge1xuICAgIGNvbnN0IGZpZWxkQ29uZiA9IHRoaXMuZ2V0RmllbGQoKTtcbiAgICBpZiAoIWZpZWxkQ29uZikge1xuICAgICAgdGhpcy5wYXJlbnRGb3JtLmdldCgnZmllbGQnKS5zZXRWYWx1ZSh0aGlzLmdldERlZmF1bHRGaWVsZCgpKTtcbiAgICAgIGNvbnNvbGUud2FybihgTm8gZmllbGQgZm91bmQgZm9yIGZpZWxkICcke2ZpZWxkQ29uZi5uYW1lfScuIGApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IGZpZWxkLCBvcGVyYXRvciB9ID0gdGhpcy5wYXJlbnRGb3JtLnZhbHVlO1xuXG4gICAgaWYgKHRoaXMuX2xhc3RDb250ZXh0LmZpZWxkICE9PSBmaWVsZCkge1xuICAgICAgdGhpcy5jcmVhdGVGaWVsZFRlbXBsYXRlcygpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fbGFzdENvbnRleHQub3BlcmF0b3IgIT09IG9wZXJhdG9yKSB7XG4gICAgICB0aGlzLnBhcmVudEZvcm0uZ2V0KCd2YWx1ZScpLnNldFZhbHVlKG51bGwpO1xuICAgIH1cblxuICAgIHRoaXMuX2xhc3RDb250ZXh0ID0geyAuLi50aGlzLnBhcmVudEZvcm0udmFsdWUgfTtcbiAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIC8qKiBBZGRzIGEgZmllbGQgZGVmaW5pdGlvbiB0aGF0IHdhcyBub3QgaW5jbHVkZWQgYXMgcGFydCBvZiB0aGUgY29udGVudCBjaGlsZHJlbi4gKi9cbiAgYWRkRmllbGREZWYoZmllbGREZWY6IEJhc2VGaWx0ZXJGaWVsZERlZikge1xuICAgIHRoaXMuX2N1c3RvbUZpZWxkRGVmcy5hZGQoZmllbGREZWYpO1xuICB9XG5cbiAgLyoqIFJlbW92ZXMgYSBmaWVsZCBkZWZpbml0aW9uIHRoYXQgd2FzIG5vdCBpbmNsdWRlZCBhcyBwYXJ0IG9mIHRoZSBjb250ZW50IGNoaWxkcmVuLiAqL1xuICByZW1vdmVGaWVsZERlZihmaWVsZERlZjogQmFzZUZpbHRlckZpZWxkRGVmKSB7XG4gICAgdGhpcy5fY3VzdG9tRmllbGREZWZzLmRlbGV0ZShmaWVsZERlZik7XG4gIH1cblxuICBwcml2YXRlIF9jYWNoZUZpZWxkRGVmcygpIHtcbiAgICB0aGlzLl9maWVsZERlZnNCeU5hbWUuY2xlYXIoKTtcblxuICAgIGNvbnN0IGRlZnMgPSBbXG4gICAgICAvLyBEeW5hbWljYWxseSBBZGRlZCBEZWZpbml0aW9uc1xuICAgICAgLi4uQXJyYXkuZnJvbSh0aGlzLl9jdXN0b21GaWVsZERlZnMpLFxuICAgICAgLy8gRGVmaW5pdGlvbnMgYWRkZWQgYXMgQ29udGVudFxuICAgICAgLi4uQXJyYXkuZnJvbSh0aGlzLl9jb250ZW50RmllbGRUeXBlRGVmcyksXG4gICAgICAuLi5BcnJheS5mcm9tKHRoaXMuX2NvbnRlbnRGaWVsZERlZnMpLFxuICAgIF07XG4gICAgZGVmcy5mb3JFYWNoKChmaWVsZERlZikgPT4ge1xuICAgICAgaWYgKHRoaXMuX2ZpZWxkRGVmc0J5TmFtZS5oYXMoZmllbGREZWYubmFtZSkpIHtcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKGBkdXBsaWNhdGUgZmllbGQgbmFtZSBmb3IgJHtmaWVsZERlZi5uYW1lfWApO1xuICAgICAgICBjb25zb2xlLndhcm4oYGR1cGxpY2F0ZSBmaWVsZCBuYW1lIGZvciAke2ZpZWxkRGVmLm5hbWV9YCk7XG4gICAgICB9XG4gICAgICB0aGlzLl9maWVsZERlZnNCeU5hbWUuc2V0KGZpZWxkRGVmLm5hbWUsIGZpZWxkRGVmKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZmluZERlZmluaXRpb25Gb3JGaWVsZChmaWVsZCkge1xuICAgIGlmICghZmllbGQpIHJldHVybjtcbiAgICBjb25zdCBlZGl0VHlwZSA9IHRoaXMuZWRpdFR5cGVGbihmaWVsZCk7XG4gICAgLy8gRG9uJ3QgbG9vayBhdCBkYXRhU3BlY2lhbGl6YXRpb24gaXQgaXMgbm8gZ29vZCwgdGhpcyBtaXNzZXMgY3VycmVuY3ksIGFuZCBwZXJjZW50XG4gICAgY29uc3QgeyBuYW1lLCBpbnB1dFR5cGUsIGRhdGFUeXBlLCB0eXBlIH0gPSBmaWVsZDtcbiAgICAvLyBDaGVjayBGaWVsZHMgYnkgcHJpb3JpdHkgZm9yIG1hdGNoIEZpZWxkIERlZmluaXRpb25cbiAgICBjb25zdCBrZXkgPSBbbmFtZSwgZWRpdFR5cGUsIGlucHV0VHlwZSwgZGF0YVR5cGUsIHR5cGUsICdkZWZhdWx0J10uZmluZCgoaXQpID0+IHRoaXMuX2ZpZWxkRGVmc0J5TmFtZS5oYXMoaXQpKTtcbiAgICAvLyBjb25zb2xlLmxvZygnbG9va2luZyBmb3IgaW5wdXQnLCBuYW1lLCBpbnB1dFR5cGUsIGRhdGFTcGVjaWFsaXphdGlvbiwgZGF0YVR5cGUsIHR5cGUsIHRoaXMuX2ZpZWxkRGVmc0J5TmFtZSk7XG5cbiAgICByZXR1cm4gdGhpcy5fZmllbGREZWZzQnlOYW1lLmdldChrZXkpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVGaWVsZFRlbXBsYXRlcygpIHtcbiAgICBjb25zdCBkZWZpbml0aW9uID0gdGhpcy5maW5kRGVmaW5pdGlvbkZvckZpZWxkKHRoaXMuZ2V0RmllbGQoKSk7XG4gICAgY29uc29sZS5sb2coJ2ZvdW5kIGRlZicsIGRlZmluaXRpb24pO1xuICAgIHRoaXMucGFyZW50Rm9ybS5nZXQoJ29wZXJhdG9yJykuc2V0VmFsdWUoZGVmaW5pdGlvbi5kZWZhdWx0T3BlcmF0b3IpO1xuICAgIHRoaXMucGFyZW50Rm9ybS5nZXQoJ3ZhbHVlJykuc2V0VmFsdWUobnVsbCk7XG5cbiAgICB0aGlzLmNyZWF0ZUZpZWxkT3BlcmF0b3JzKGRlZmluaXRpb24pO1xuICAgIHRoaXMuY3JlYXRlRmllbGRJbnB1dChkZWZpbml0aW9uKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlRmllbGRPcGVyYXRvcnMoZGVmaW5pdGlvbjogQmFzZUZpbHRlckZpZWxkRGVmKSB7XG4gICAgdGhpcy5fb3BlcmF0b3JPdXRsZXQudmlld0NvbnRhaW5lci5jbGVhcigpO1xuICAgIGlmIChkZWZpbml0aW9uKSB7XG4gICAgICBjb25zdCBjb250ZXh0ID0geyAkaW1wbGljaXQ6IHRoaXMucGFyZW50Rm9ybSwgZmllbGRNZXRhOiB0aGlzLmdldEZpZWxkKCkgfTtcbiAgICAgIHRoaXMuX29wZXJhdG9yT3V0bGV0LnZpZXdDb250YWluZXIuY3JlYXRlRW1iZWRkZWRWaWV3KGRlZmluaXRpb24uZmllbGRPcGVyYXRvcnMudGVtcGxhdGUsIGNvbnRleHQpO1xuICAgIH1cbiAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlRmllbGRJbnB1dChkZWZpbml0aW9uOiBCYXNlRmlsdGVyRmllbGREZWYpIHtcbiAgICB0aGlzLl9pbnB1dE91dGxldC52aWV3Q29udGFpbmVyLmNsZWFyKCk7XG4gICAgaWYgKGRlZmluaXRpb24pIHtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSB7ICRpbXBsaWNpdDogdGhpcy5wYXJlbnRGb3JtLCBmaWVsZE1ldGE6IHRoaXMuZ2V0RmllbGQoKSB9O1xuICAgICAgdGhpcy5faW5wdXRPdXRsZXQudmlld0NvbnRhaW5lci5jcmVhdGVFbWJlZGRlZFZpZXcoZGVmaW5pdGlvbi5maWVsZElucHV0LnRlbXBsYXRlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gIH1cbn1cbiIsIjxmb3JtIFtmb3JtR3JvdXBdPVwicGFyZW50Rm9ybVwiPlxuICA8bm92by1ncmlkIGdhcD1cIjFyZW1cIiBjb2x1bW5zPVwiMTZyZW0gMTByZW0gMWZyXCI+XG4gICAgPG5vdm8tZmllbGQgY2xhc3M9XCJjb25kaXRpb24tZmllbGRcIj5cbiAgICAgIDxub3ZvLXNlbGVjdFxuICAgICAgICBwbGFjZWhvbGRlcj1cIkNob29zZSBhIGZpZWxkLi4uXCJcbiAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiZmllbGRcIlxuICAgICAgICAob25TZWxlY3QpPVwib25GaWVsZFNlbGVjdCgpXCJcbiAgICAgICAgb3ZlcmxheVdpZHRoPVwiYXV0b1wiXG4gICAgICAgIG92ZXJsYXlIZWlnaHQ9XCJhdXRvXCJcbiAgICAgICAgW3N0eWxlLm1pbldpZHRoLnB4XT1cIjE2MFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmllbGQtc2VsZWN0LXBpY2tlclwiPlxuICAgICAgICAgIDxub3ZvLW5hdiB0aGVtZT1cIndoaXRlXCIgZGlyZWN0aW9uPVwidmVydGljYWxcIj5cbiAgICAgICAgICAgIDxub3ZvLXRhYiAqbmdGb3I9XCJsZXQgZW50aXR5IG9mIGNvbmZpZz8uZmllbGRzXCIgKGFjdGl2ZUNoYW5nZSk9XCJjaGFuZ2VGaWVsZE9wdGlvbnMoZW50aXR5KVwiPlxuICAgICAgICAgICAgICB7eyBlbnRpdHkubGFiZWwgfX1cbiAgICAgICAgICAgIDwvbm92by10YWI+XG4gICAgICAgICAgPC9ub3ZvLW5hdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmlsdGVyLXNlYXJjaC1yZXN1bHRzXCI+XG4gICAgICAgICAgICA8bm92by1zZWFyY2ggYWx3YXlzT3Blbj1cInRydWVcIiBbZm9ybUNvbnRyb2xdPVwic2VhcmNoVGVybVwiPjwvbm92by1zZWFyY2g+XG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwicmVzdWx0cyQgfCBhc3luYyBhcyByZXN1bHRzOyBlbHNlIGxvYWRpbmdcIj5cbiAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInJlc3VsdHMubGVuZ3RoOyBlbHNlIGVtcHR5XCI+XG4gICAgICAgICAgICAgICAgPG5vdm8tb3B0aW9uICpuZ0Zvcj1cImxldCBmaWVsZCBvZiByZXN1bHRzXCIgdmFsdWU9XCJ7eyBmaWVsZENvbmZpZy52YWx1ZSB9fS57eyBmaWVsZC5uYW1lIH19XCI+XG4gICAgICAgICAgICAgICAgICB7eyBmaWVsZC5sYWJlbCB8fCBmaWVsZC5uYW1lIH19XG4gICAgICAgICAgICAgICAgPC9ub3ZvLW9wdGlvbj5cbiAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgIDwhLS0gRU1QVFkgU1RBVEUgVEVNUExBVEUgLS0+XG4gICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjZW1wdHk+XG4gICAgICAgICAgICAgICAgPG5vdm8tbm9uLWlkZWFsLXN0YXRlXG4gICAgICAgICAgICAgICAgICBpY29uPVwic2VhcmNoXCJcbiAgICAgICAgICAgICAgICAgIHRpdGxlPVwiTm8gcmVzdWx0cyBmb3VuZC5cIlxuICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb249XCJZb3VyIHNlYXJjaCBkaWRuJ3QgZmluZCBhbnl0aGluZy4gVHJ5IHNlYXJjaGluZyBmb3Igc29tZXRoaW5nIGVsc2UuXCI+XG4gICAgICAgICAgICAgICAgPC9ub3ZvLW5vbi1pZGVhbC1zdGF0ZT5cbiAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgPCEtLSBMT0FESU5HIFRFTVBMQVRFIC0tPlxuICAgICAgICAgICAgPG5nLXRlbXBsYXRlICNsb2FkaW5nPlxuICAgICAgICAgICAgICA8bm92by1sb2FkaW5nPjwvbm92by1sb2FkaW5nPlxuICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L25vdm8tc2VsZWN0PlxuICAgIDwvbm92by1maWVsZD5cblxuICAgIDxkaXYgY2xhc3M9XCJjb25kaXRpb24tb3BlcmF0b3JcIj5cbiAgICAgIDxuZy1jb250YWluZXIgcXVlcnlGaWx0ZXJPcGVyYXRvck91dGxldD48L25nLWNvbnRhaW5lcj5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJjb25kaXRpb24tdmFsdWVcIj5cbiAgICAgIDxuZy1jb250YWluZXIgcXVlcnlGaWx0ZXJJbnB1dE91dGxldD48L25nLWNvbnRhaW5lcj5cbiAgICA8L2Rpdj5cbiAgPC9ub3ZvLWdyaWQ+XG48L2Zvcm0+Il19