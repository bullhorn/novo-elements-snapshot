// NG2
import { Component, EventEmitter, Input, Output } from '@angular/core';
import { DomSanitizer } from '@angular/platform-browser';
// APP
import { NovoLabelService } from 'novo-elements/services';
import * as i0 from "@angular/core";
import * as i1 from "novo-elements/services";
import * as i2 from "@angular/platform-browser";
import * as i3 from "@angular/common";
import * as i4 from "novo-elements/elements/button";
export class NovoTipWellElement {
    constructor(labels, sanitizer) {
        this.labels = labels;
        this.sanitizer = sanitizer;
        this.button = true;
        this.sanitize = true;
        this.confirmed = new EventEmitter();
        this.isActive = true;
        this.isActive = true;
        // Check if localStorage is enabled
        this.isLocalStorageEnabled = (() => {
            let isEnabled = false;
            if (typeof localStorage === 'object') {
                try {
                    localStorage.setItem('lsTest', '1');
                    localStorage.removeItem('lsTest');
                    isEnabled = true;
                }
                catch (e) {
                    console.warn('This web browser does not support storing settings locally. In Safari, the most common cause of this is using "Private Browsing Mode". Some settings may not save or some features may not work properly for you.');
                }
            }
            return isEnabled;
        })();
    }
    // Trusts the HTML in order to show CSS styles
    get tipWithStyles() {
        if (!this._tipWithStyles || this._lastTipStyled !== this.tip) {
            this._tipWithStyles = this.sanitizer.bypassSecurityTrustHtml(this.tip);
            this._lastTipStyled = this.tip;
        }
        return this._tipWithStyles;
    }
    ngOnInit() {
        this.tip = this.tip || '';
        this.buttonText = this.buttonText || this.labels.okGotIt;
        this.button = typeof this.button === 'string' ? this.button === 'true' : this.button;
        this.icon = this.icon || null;
        // Set a (semi) unique name for the tip-well
        this.name = this.name || Math.round(Math.random() * 100);
        this.localStorageKey = `novo-tw_${this.name}`;
        // Check localStorage for state
        if (this.isLocalStorageEnabled) {
            const storedValue = JSON.parse(localStorage.getItem(this.localStorageKey));
            this.isActive = storedValue !== false;
        }
    }
    hideTip() {
        if (this.isLocalStorageEnabled) {
            localStorage.setItem(this.localStorageKey, JSON.stringify(false));
        }
        this.isActive = false;
        this.confirmed.emit();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: NovoTipWellElement, deps: [{ token: i1.NovoLabelService }, { token: i2.DomSanitizer }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: NovoTipWellElement, selector: "novo-tip-well", inputs: { name: "name", tip: "tip", buttonText: "buttonText", button: "button", icon: "icon", sanitize: "sanitize" }, outputs: { confirmed: "confirmed" }, host: { properties: { "class.active": "isActive" } }, ngImport: i0, template: `
    <div *ngIf="isActive">
      <div>
        <i class="bhi-{{ icon }}" *ngIf="icon" [attr.data-automation-id]="'novo-tip-well-icon-' + name"></i>
        <ng-content select="novo-icon"></ng-content>
        <p *ngIf="sanitize && tip.length" [attr.data-automation-id]="'novo-tip-well-tip-' + name">{{ tip }}</p>
        <p *ngIf="!sanitize && tipWithStyles" [attr.data-automation-id]="'novo-tip-well-tip-' + name" [innerHTML]="tipWithStyles"></p>
        <p *ngIf="(sanitize && !tip.length) || (!sanitize && !tipWithStyles)" [attr.data-automation-id]="'novo-tip-well-tip-' + name"><ng-content></ng-content></p>
      </div>
      <button theme="dialogue" size="small" (click)="hideTip()" *ngIf="button" [attr.data-automation-id]="'novo-tip-well-button-' + name">
        {{ buttonText }}
      </button>
    </div>
  `, isInline: true, styles: [":host.active{display:inline-block;margin-bottom:1rem}:host>div{display:inline-block;border-radius:.25rem;background-color:var(--background-main, #f7f7f7);color:var(--text-main, #3d464d);padding:1.25rem;text-align:right}:host>div>div{display:flex}:host>div>div>i{flex-shrink:0;text-align:center;margin-top:.3rem;margin-right:1rem;color:#aaa}:host>div>div>p{display:inline;font-weight:400;color:inherit;font-size:var(--font-size-text);transition:color .2s ease-out,opacity .2s ease-out;vertical-align:middle;width:100%;padding:0;text-align:left;white-space:pre-line}:host>div>div>p.text-capitalize{text-transform:capitalize}:host>div>div>p.text-uppercase{text-transform:uppercase}:host>div>div>p.text-nowrap{white-space:nowrap}:host>div>div>p.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}:host>div>div>p.text-size-default{font-size:inherit}:host>div>div>p.text-size-body{font-size:1.3rem}:host>div>div>p.text-size-xs{font-size:1rem}:host>div>div>p.text-size-sm{font-size:1.2rem}:host>div>div>p.text-size-md{font-size:1.3rem}:host>div>div>p.text-size-lg{font-size:1.6rem}:host>div>div>p.text-size-xl{font-size:2rem}:host>div>div>p.text-size-2xl{font-size:2.6rem}:host>div>div>p.text-size-3xl{font-size:3.2rem}:host>div>div>p.text-size-smaller{font-size:.8em}:host>div>div>p.text-size-larger{font-size:1.2em}:host>div>div>p.text-color-black{color:#000}:host>div>div>p.text-color-white{color:#fff}:host>div>div>p.text-color-gray{color:#9e9e9e}:host>div>div>p.text-color-grey{color:#9e9e9e}:host>div>div>p.text-color-offWhite{color:#f7f7f7}:host>div>div>p.text-color-bright{color:#f7f7f7}:host>div>div>p.text-color-light{color:#dbdbdb}:host>div>div>p.text-color-neutral{color:#4f5361}:host>div>div>p.text-color-dark{color:#3d464d}:host>div>div>p.text-color-orange{color:#ff6900}:host>div>div>p.text-color-navigation{color:#202945}:host>div>div>p.text-color-skyBlue{color:#009bdf}:host>div>div>p.text-color-steel{color:#5b6770}:host>div>div>p.text-color-metal{color:#637893}:host>div>div>p.text-color-sand{color:#f4f4f4}:host>div>div>p.text-color-silver{color:#e2e2e2}:host>div>div>p.text-color-stone{color:#bebebe}:host>div>div>p.text-color-ash{color:#a0a0a0}:host>div>div>p.text-color-slate{color:#707070}:host>div>div>p.text-color-onyx{color:#526980}:host>div>div>p.text-color-charcoal{color:#282828}:host>div>div>p.text-color-moonlight{color:#1a242f}:host>div>div>p.text-color-midnight{color:#202945}:host>div>div>p.text-color-darkness{color:#161f27}:host>div>div>p.text-color-navy{color:#0d2d42}:host>div>div>p.text-color-aqua{color:#3bafda}:host>div>div>p.text-color-ocean{color:#4a89dc}:host>div>div>p.text-color-mint{color:#37bc9b}:host>div>div>p.text-color-grass{color:#8cc152}:host>div>div>p.text-color-sunflower{color:#f6b042}:host>div>div>p.text-color-bittersweet{color:#eb6845}:host>div>div>p.text-color-grapefruit{color:#da4453}:host>div>div>p.text-color-carnation{color:#d770ad}:host>div>div>p.text-color-lavender{color:#967adc}:host>div>div>p.text-color-mountain{color:#9678b6}:host>div>div>p.text-color-info{color:#4a89dc}:host>div>div>p.text-color-positive{color:#4a89dc}:host>div>div>p.text-color-success{color:#8cc152}:host>div>div>p.text-color-negative{color:#da4453}:host>div>div>p.text-color-danger{color:#da4453}:host>div>div>p.text-color-error{color:#da4453}:host>div>div>p.text-color-warning{color:#f6b042}:host>div>div>p.text-color-empty{color:#cccdcc}:host>div>div>p.text-color-disabled{color:#bebebe}:host>div>div>p.text-color-background{color:#f7f7f7}:host>div>div>p.text-color-backgroundDark{color:#e2e2e2}:host>div>div>p.text-color-presentation{color:#5b6770}:host>div>div>p.text-color-bullhorn{color:#ff6900}:host>div>div>p.text-color-pulse{color:#3bafda}:host>div>div>p.text-color-company{color:#39d}:host>div>div>p.text-color-candidate{color:#4b7}:host>div>div>p.text-color-lead{color:#a69}:host>div>div>p.text-color-contact{color:#fa4}:host>div>div>p.text-color-clientcontact{color:#fa4}:host>div>div>p.text-color-opportunity{color:#625}:host>div>div>p.text-color-job{color:#b56}:host>div>div>p.text-color-joborder{color:#b56}:host>div>div>p.text-color-submission{color:#a9adbb}:host>div>div>p.text-color-sendout{color:#747884}:host>div>div>p.text-color-placement{color:#0b344f}:host>div>div>p.text-color-note{color:#747884}:host>div>div>p.text-color-contract{color:#454ea0}:host>div>div>p.text-color-jobCode{color:#696d79}:host>div>div>p.text-color-earnCode{color:#696d79}:host>div>div>p.text-color-invoiceStatement{color:#696d79}:host>div>div>p.text-color-billableCharge{color:#696d79}:host>div>div>p.text-color-payableCharge{color:#696d79}:host>div>div>p.text-color-user{color:#696d79}:host>div>div>p.text-color-corporateUser{color:#696d79}:host>div>div>p.text-color-distributionList{color:#696d79}:host>div>div>p.text-color-credential{color:#696d79}:host>div>div>p.text-color-person{color:#696d79}:host>div>div>p.margin-before{margin-top:.4rem}:host>div>div>p.margin-after{margin-bottom:.8rem}:host>div>div>p.text-length-small{max-width:40ch}:host>div>div>p.text-length-medium{max-width:55ch}:host>div>div>p.text-length-large{max-width:70ch}:host>div>div>p.text-weight-hairline{font-weight:100}:host>div>div>p.text-weight-thin{font-weight:200}:host>div>div>p.text-weight-light{font-weight:300}:host>div>div>p.text-weight-normal{font-weight:400}:host>div>div>p.text-weight-medium{font-weight:500}:host>div>div>p.text-weight-semibold{font-weight:600}:host>div>div>p.text-weight-bold{font-weight:700}:host>div>div>p.text-weight-extrabold{font-weight:800}:host>div>div>p.text-weight-heavy{font-weight:900}:host>div>div>p.text-weight-lighter{font-weight:lighter}:host>div>div>p.text-weight-bolder{font-weight:bolder}\n"], dependencies: [{ kind: "directive", type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i4.NovoButtonElement, selector: "novo-button,button[theme]", inputs: ["color", "side", "size", "theme", "loading", "icon", "disabled"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: NovoTipWellElement, decorators: [{
            type: Component,
            args: [{ selector: 'novo-tip-well', template: `
    <div *ngIf="isActive">
      <div>
        <i class="bhi-{{ icon }}" *ngIf="icon" [attr.data-automation-id]="'novo-tip-well-icon-' + name"></i>
        <ng-content select="novo-icon"></ng-content>
        <p *ngIf="sanitize && tip.length" [attr.data-automation-id]="'novo-tip-well-tip-' + name">{{ tip }}</p>
        <p *ngIf="!sanitize && tipWithStyles" [attr.data-automation-id]="'novo-tip-well-tip-' + name" [innerHTML]="tipWithStyles"></p>
        <p *ngIf="(sanitize && !tip.length) || (!sanitize && !tipWithStyles)" [attr.data-automation-id]="'novo-tip-well-tip-' + name"><ng-content></ng-content></p>
      </div>
      <button theme="dialogue" size="small" (click)="hideTip()" *ngIf="button" [attr.data-automation-id]="'novo-tip-well-button-' + name">
        {{ buttonText }}
      </button>
    </div>
  `, host: {
                        '[class.active]': 'isActive',
                    }, styles: [":host.active{display:inline-block;margin-bottom:1rem}:host>div{display:inline-block;border-radius:.25rem;background-color:var(--background-main, #f7f7f7);color:var(--text-main, #3d464d);padding:1.25rem;text-align:right}:host>div>div{display:flex}:host>div>div>i{flex-shrink:0;text-align:center;margin-top:.3rem;margin-right:1rem;color:#aaa}:host>div>div>p{display:inline;font-weight:400;color:inherit;font-size:var(--font-size-text);transition:color .2s ease-out,opacity .2s ease-out;vertical-align:middle;width:100%;padding:0;text-align:left;white-space:pre-line}:host>div>div>p.text-capitalize{text-transform:capitalize}:host>div>div>p.text-uppercase{text-transform:uppercase}:host>div>div>p.text-nowrap{white-space:nowrap}:host>div>div>p.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}:host>div>div>p.text-size-default{font-size:inherit}:host>div>div>p.text-size-body{font-size:1.3rem}:host>div>div>p.text-size-xs{font-size:1rem}:host>div>div>p.text-size-sm{font-size:1.2rem}:host>div>div>p.text-size-md{font-size:1.3rem}:host>div>div>p.text-size-lg{font-size:1.6rem}:host>div>div>p.text-size-xl{font-size:2rem}:host>div>div>p.text-size-2xl{font-size:2.6rem}:host>div>div>p.text-size-3xl{font-size:3.2rem}:host>div>div>p.text-size-smaller{font-size:.8em}:host>div>div>p.text-size-larger{font-size:1.2em}:host>div>div>p.text-color-black{color:#000}:host>div>div>p.text-color-white{color:#fff}:host>div>div>p.text-color-gray{color:#9e9e9e}:host>div>div>p.text-color-grey{color:#9e9e9e}:host>div>div>p.text-color-offWhite{color:#f7f7f7}:host>div>div>p.text-color-bright{color:#f7f7f7}:host>div>div>p.text-color-light{color:#dbdbdb}:host>div>div>p.text-color-neutral{color:#4f5361}:host>div>div>p.text-color-dark{color:#3d464d}:host>div>div>p.text-color-orange{color:#ff6900}:host>div>div>p.text-color-navigation{color:#202945}:host>div>div>p.text-color-skyBlue{color:#009bdf}:host>div>div>p.text-color-steel{color:#5b6770}:host>div>div>p.text-color-metal{color:#637893}:host>div>div>p.text-color-sand{color:#f4f4f4}:host>div>div>p.text-color-silver{color:#e2e2e2}:host>div>div>p.text-color-stone{color:#bebebe}:host>div>div>p.text-color-ash{color:#a0a0a0}:host>div>div>p.text-color-slate{color:#707070}:host>div>div>p.text-color-onyx{color:#526980}:host>div>div>p.text-color-charcoal{color:#282828}:host>div>div>p.text-color-moonlight{color:#1a242f}:host>div>div>p.text-color-midnight{color:#202945}:host>div>div>p.text-color-darkness{color:#161f27}:host>div>div>p.text-color-navy{color:#0d2d42}:host>div>div>p.text-color-aqua{color:#3bafda}:host>div>div>p.text-color-ocean{color:#4a89dc}:host>div>div>p.text-color-mint{color:#37bc9b}:host>div>div>p.text-color-grass{color:#8cc152}:host>div>div>p.text-color-sunflower{color:#f6b042}:host>div>div>p.text-color-bittersweet{color:#eb6845}:host>div>div>p.text-color-grapefruit{color:#da4453}:host>div>div>p.text-color-carnation{color:#d770ad}:host>div>div>p.text-color-lavender{color:#967adc}:host>div>div>p.text-color-mountain{color:#9678b6}:host>div>div>p.text-color-info{color:#4a89dc}:host>div>div>p.text-color-positive{color:#4a89dc}:host>div>div>p.text-color-success{color:#8cc152}:host>div>div>p.text-color-negative{color:#da4453}:host>div>div>p.text-color-danger{color:#da4453}:host>div>div>p.text-color-error{color:#da4453}:host>div>div>p.text-color-warning{color:#f6b042}:host>div>div>p.text-color-empty{color:#cccdcc}:host>div>div>p.text-color-disabled{color:#bebebe}:host>div>div>p.text-color-background{color:#f7f7f7}:host>div>div>p.text-color-backgroundDark{color:#e2e2e2}:host>div>div>p.text-color-presentation{color:#5b6770}:host>div>div>p.text-color-bullhorn{color:#ff6900}:host>div>div>p.text-color-pulse{color:#3bafda}:host>div>div>p.text-color-company{color:#39d}:host>div>div>p.text-color-candidate{color:#4b7}:host>div>div>p.text-color-lead{color:#a69}:host>div>div>p.text-color-contact{color:#fa4}:host>div>div>p.text-color-clientcontact{color:#fa4}:host>div>div>p.text-color-opportunity{color:#625}:host>div>div>p.text-color-job{color:#b56}:host>div>div>p.text-color-joborder{color:#b56}:host>div>div>p.text-color-submission{color:#a9adbb}:host>div>div>p.text-color-sendout{color:#747884}:host>div>div>p.text-color-placement{color:#0b344f}:host>div>div>p.text-color-note{color:#747884}:host>div>div>p.text-color-contract{color:#454ea0}:host>div>div>p.text-color-jobCode{color:#696d79}:host>div>div>p.text-color-earnCode{color:#696d79}:host>div>div>p.text-color-invoiceStatement{color:#696d79}:host>div>div>p.text-color-billableCharge{color:#696d79}:host>div>div>p.text-color-payableCharge{color:#696d79}:host>div>div>p.text-color-user{color:#696d79}:host>div>div>p.text-color-corporateUser{color:#696d79}:host>div>div>p.text-color-distributionList{color:#696d79}:host>div>div>p.text-color-credential{color:#696d79}:host>div>div>p.text-color-person{color:#696d79}:host>div>div>p.margin-before{margin-top:.4rem}:host>div>div>p.margin-after{margin-bottom:.8rem}:host>div>div>p.text-length-small{max-width:40ch}:host>div>div>p.text-length-medium{max-width:55ch}:host>div>div>p.text-length-large{max-width:70ch}:host>div>div>p.text-weight-hairline{font-weight:100}:host>div>div>p.text-weight-thin{font-weight:200}:host>div>div>p.text-weight-light{font-weight:300}:host>div>div>p.text-weight-normal{font-weight:400}:host>div>div>p.text-weight-medium{font-weight:500}:host>div>div>p.text-weight-semibold{font-weight:600}:host>div>div>p.text-weight-bold{font-weight:700}:host>div>div>p.text-weight-extrabold{font-weight:800}:host>div>div>p.text-weight-heavy{font-weight:900}:host>div>div>p.text-weight-lighter{font-weight:lighter}:host>div>div>p.text-weight-bolder{font-weight:bolder}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.NovoLabelService }, { type: i2.DomSanitizer }]; }, propDecorators: { name: [{
                type: Input
            }], tip: [{
                type: Input
            }], buttonText: [{
                type: Input
            }], button: [{
                type: Input
            }], icon: [{
                type: Input
            }], sanitize: [{
                type: Input
            }], confirmed: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGlwV2VsbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL25vdm8tZWxlbWVudHMvc3JjL2VsZW1lbnRzL3RpcC13ZWxsL1RpcFdlbGwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtBQUNOLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDL0UsT0FBTyxFQUFFLFlBQVksRUFBWSxNQUFNLDJCQUEyQixDQUFDO0FBQ25FLE1BQU07QUFDTixPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQzs7Ozs7O0FBdUIxRCxNQUFNLE9BQU8sa0JBQWtCO0lBdUI3QixZQUFvQixNQUF3QixFQUFVLFNBQXVCO1FBQXpELFdBQU0sR0FBTixNQUFNLENBQWtCO1FBQVUsY0FBUyxHQUFULFNBQVMsQ0FBYztRQWY3RSxXQUFNLEdBQVksSUFBSSxDQUFDO1FBSXZCLGFBQVEsR0FBWSxJQUFJLENBQUM7UUFFekIsY0FBUyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFFL0IsYUFBUSxHQUFZLElBQUksQ0FBQztRQVF2QixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztRQUNyQixtQ0FBbUM7UUFDbkMsSUFBSSxDQUFDLHFCQUFxQixHQUFHLENBQUMsR0FBRyxFQUFFO1lBQ2pDLElBQUksU0FBUyxHQUFHLEtBQUssQ0FBQztZQUN0QixJQUFJLE9BQU8sWUFBWSxLQUFLLFFBQVEsRUFBRTtnQkFDcEMsSUFBSTtvQkFDRixZQUFZLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQztvQkFDcEMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFDbEMsU0FBUyxHQUFHLElBQUksQ0FBQztpQkFDbEI7Z0JBQUMsT0FBTyxDQUFDLEVBQUU7b0JBQ1YsT0FBTyxDQUFDLElBQUksQ0FDVixtTkFBbU4sQ0FDcE4sQ0FBQztpQkFDSDthQUNGO1lBQ0QsT0FBTyxTQUFTLENBQUM7UUFDbkIsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUNQLENBQUM7SUFFRCw4Q0FBOEM7SUFDOUMsSUFBSSxhQUFhO1FBQ2YsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLElBQUksSUFBSSxDQUFDLGNBQWMsS0FBSyxJQUFJLENBQUMsR0FBRyxFQUFFO1lBQzVELElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDdkUsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO1NBQ2hDO1FBQ0QsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDO0lBQzdCLENBQUM7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQztRQUMxQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUM7UUFDekQsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLElBQUksQ0FBQyxNQUFNLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUNyRixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDO1FBQzlCLDRDQUE0QztRQUM1QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDekQsSUFBSSxDQUFDLGVBQWUsR0FBRyxXQUFXLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUM5QywrQkFBK0I7UUFDL0IsSUFBSSxJQUFJLENBQUMscUJBQXFCLEVBQUU7WUFDOUIsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDO1lBQzNFLElBQUksQ0FBQyxRQUFRLEdBQUcsV0FBVyxLQUFLLEtBQUssQ0FBQztTQUN2QztJQUNILENBQUM7SUFFRCxPQUFPO1FBQ0wsSUFBSSxJQUFJLENBQUMscUJBQXFCLEVBQUU7WUFDOUIsWUFBWSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztTQUNuRTtRQUNELElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDeEIsQ0FBQzsrR0F6RVUsa0JBQWtCO21HQUFsQixrQkFBa0Isc1FBbkJuQjs7Ozs7Ozs7Ozs7OztHQWFUOzs0RkFNVSxrQkFBa0I7a0JBckI5QixTQUFTOytCQUNFLGVBQWUsWUFDZjs7Ozs7Ozs7Ozs7OztHQWFULFFBRUs7d0JBQ0osZ0JBQWdCLEVBQUUsVUFBVTtxQkFDN0I7a0lBSUQsSUFBSTtzQkFESCxLQUFLO2dCQUdOLEdBQUc7c0JBREYsS0FBSztnQkFHTixVQUFVO3NCQURULEtBQUs7Z0JBR04sTUFBTTtzQkFETCxLQUFLO2dCQUdOLElBQUk7c0JBREgsS0FBSztnQkFHTixRQUFRO3NCQURQLEtBQUs7Z0JBR04sU0FBUztzQkFEUixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTkcyXG5pbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBEb21TYW5pdGl6ZXIsIFNhZmVIdG1sIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7XG4vLyBBUFBcbmltcG9ydCB7IE5vdm9MYWJlbFNlcnZpY2UgfSBmcm9tICdub3ZvLWVsZW1lbnRzL3NlcnZpY2VzJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbm92by10aXAtd2VsbCcsXG4gIHRlbXBsYXRlOiBgXG4gICAgPGRpdiAqbmdJZj1cImlzQWN0aXZlXCI+XG4gICAgICA8ZGl2PlxuICAgICAgICA8aSBjbGFzcz1cImJoaS17eyBpY29uIH19XCIgKm5nSWY9XCJpY29uXCIgW2F0dHIuZGF0YS1hdXRvbWF0aW9uLWlkXT1cIidub3ZvLXRpcC13ZWxsLWljb24tJyArIG5hbWVcIj48L2k+XG4gICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIm5vdm8taWNvblwiPjwvbmctY29udGVudD5cbiAgICAgICAgPHAgKm5nSWY9XCJzYW5pdGl6ZSAmJiB0aXAubGVuZ3RoXCIgW2F0dHIuZGF0YS1hdXRvbWF0aW9uLWlkXT1cIidub3ZvLXRpcC13ZWxsLXRpcC0nICsgbmFtZVwiPnt7IHRpcCB9fTwvcD5cbiAgICAgICAgPHAgKm5nSWY9XCIhc2FuaXRpemUgJiYgdGlwV2l0aFN0eWxlc1wiIFthdHRyLmRhdGEtYXV0b21hdGlvbi1pZF09XCInbm92by10aXAtd2VsbC10aXAtJyArIG5hbWVcIiBbaW5uZXJIVE1MXT1cInRpcFdpdGhTdHlsZXNcIj48L3A+XG4gICAgICAgIDxwICpuZ0lmPVwiKHNhbml0aXplICYmICF0aXAubGVuZ3RoKSB8fCAoIXNhbml0aXplICYmICF0aXBXaXRoU3R5bGVzKVwiIFthdHRyLmRhdGEtYXV0b21hdGlvbi1pZF09XCInbm92by10aXAtd2VsbC10aXAtJyArIG5hbWVcIj48bmctY29udGVudD48L25nLWNvbnRlbnQ+PC9wPlxuICAgICAgPC9kaXY+XG4gICAgICA8YnV0dG9uIHRoZW1lPVwiZGlhbG9ndWVcIiBzaXplPVwic21hbGxcIiAoY2xpY2spPVwiaGlkZVRpcCgpXCIgKm5nSWY9XCJidXR0b25cIiBbYXR0ci5kYXRhLWF1dG9tYXRpb24taWRdPVwiJ25vdm8tdGlwLXdlbGwtYnV0dG9uLScgKyBuYW1lXCI+XG4gICAgICAgIHt7IGJ1dHRvblRleHQgfX1cbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICBgLFxuICBzdHlsZVVybHM6IFsnLi9UaXBXZWxsLnNjc3MnXSxcbiAgaG9zdDoge1xuICAgICdbY2xhc3MuYWN0aXZlXSc6ICdpc0FjdGl2ZScsXG4gIH0sXG59KVxuZXhwb3J0IGNsYXNzIE5vdm9UaXBXZWxsRWxlbWVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBJbnB1dCgpXG4gIG5hbWU6IHN0cmluZyB8IG51bWJlcjtcbiAgQElucHV0KClcbiAgdGlwOiBzdHJpbmc7XG4gIEBJbnB1dCgpXG4gIGJ1dHRvblRleHQ6IHN0cmluZztcbiAgQElucHV0KClcbiAgYnV0dG9uOiBib29sZWFuID0gdHJ1ZTtcbiAgQElucHV0KClcbiAgaWNvbjogc3RyaW5nO1xuICBASW5wdXQoKVxuICBzYW5pdGl6ZTogYm9vbGVhbiA9IHRydWU7XG4gIEBPdXRwdXQoKVxuICBjb25maXJtZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgaXNBY3RpdmU6IGJvb2xlYW4gPSB0cnVlO1xuICBpc0xvY2FsU3RvcmFnZUVuYWJsZWQ6IGFueTtcbiAgbG9jYWxTdG9yYWdlS2V5OiBzdHJpbmc7XG5cbiAgcHJpdmF0ZSBfdGlwV2l0aFN0eWxlczogU2FmZUh0bWw7XG4gIHByaXZhdGUgX2xhc3RUaXBTdHlsZWQ6IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGxhYmVsczogTm92b0xhYmVsU2VydmljZSwgcHJpdmF0ZSBzYW5pdGl6ZXI6IERvbVNhbml0aXplcikge1xuICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xuICAgIC8vIENoZWNrIGlmIGxvY2FsU3RvcmFnZSBpcyBlbmFibGVkXG4gICAgdGhpcy5pc0xvY2FsU3RvcmFnZUVuYWJsZWQgPSAoKCkgPT4ge1xuICAgICAgbGV0IGlzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xzVGVzdCcsICcxJyk7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2xzVGVzdCcpO1xuICAgICAgICAgIGlzRW5hYmxlZCA9IHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAnVGhpcyB3ZWIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHN0b3Jpbmcgc2V0dGluZ3MgbG9jYWxseS4gSW4gU2FmYXJpLCB0aGUgbW9zdCBjb21tb24gY2F1c2Ugb2YgdGhpcyBpcyB1c2luZyBcIlByaXZhdGUgQnJvd3NpbmcgTW9kZVwiLiBTb21lIHNldHRpbmdzIG1heSBub3Qgc2F2ZSBvciBzb21lIGZlYXR1cmVzIG1heSBub3Qgd29yayBwcm9wZXJseSBmb3IgeW91LicsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGlzRW5hYmxlZDtcbiAgICB9KSgpO1xuICB9XG5cbiAgLy8gVHJ1c3RzIHRoZSBIVE1MIGluIG9yZGVyIHRvIHNob3cgQ1NTIHN0eWxlc1xuICBnZXQgdGlwV2l0aFN0eWxlcygpOiBTYWZlSHRtbCB7XG4gICAgaWYgKCF0aGlzLl90aXBXaXRoU3R5bGVzIHx8IHRoaXMuX2xhc3RUaXBTdHlsZWQgIT09IHRoaXMudGlwKSB7XG4gICAgICB0aGlzLl90aXBXaXRoU3R5bGVzID0gdGhpcy5zYW5pdGl6ZXIuYnlwYXNzU2VjdXJpdHlUcnVzdEh0bWwodGhpcy50aXApO1xuICAgICAgdGhpcy5fbGFzdFRpcFN0eWxlZCA9IHRoaXMudGlwO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGlwV2l0aFN0eWxlcztcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMudGlwID0gdGhpcy50aXAgfHwgJyc7XG4gICAgdGhpcy5idXR0b25UZXh0ID0gdGhpcy5idXR0b25UZXh0IHx8IHRoaXMubGFiZWxzLm9rR290SXQ7XG4gICAgdGhpcy5idXR0b24gPSB0eXBlb2YgdGhpcy5idXR0b24gPT09ICdzdHJpbmcnID8gdGhpcy5idXR0b24gPT09ICd0cnVlJyA6IHRoaXMuYnV0dG9uO1xuICAgIHRoaXMuaWNvbiA9IHRoaXMuaWNvbiB8fCBudWxsO1xuICAgIC8vIFNldCBhIChzZW1pKSB1bmlxdWUgbmFtZSBmb3IgdGhlIHRpcC13ZWxsXG4gICAgdGhpcy5uYW1lID0gdGhpcy5uYW1lIHx8IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMCk7XG4gICAgdGhpcy5sb2NhbFN0b3JhZ2VLZXkgPSBgbm92by10d18ke3RoaXMubmFtZX1gO1xuICAgIC8vIENoZWNrIGxvY2FsU3RvcmFnZSBmb3Igc3RhdGVcbiAgICBpZiAodGhpcy5pc0xvY2FsU3RvcmFnZUVuYWJsZWQpIHtcbiAgICAgIGNvbnN0IHN0b3JlZFZhbHVlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLmxvY2FsU3RvcmFnZUtleSkpO1xuICAgICAgdGhpcy5pc0FjdGl2ZSA9IHN0b3JlZFZhbHVlICE9PSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBoaWRlVGlwKCkge1xuICAgIGlmICh0aGlzLmlzTG9jYWxTdG9yYWdlRW5hYmxlZCkge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5sb2NhbFN0b3JhZ2VLZXksIEpTT04uc3RyaW5naWZ5KGZhbHNlKSk7XG4gICAgfVxuICAgIHRoaXMuaXNBY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLmNvbmZpcm1lZC5lbWl0KCk7XG4gIH1cbn1cbiJdfQ==