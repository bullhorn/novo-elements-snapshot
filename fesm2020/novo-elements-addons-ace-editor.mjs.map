{"version":3,"file":"novo-elements-addons-ace-editor.mjs","sources":["../../../projects/novo-elements/src/addons/ace-editor/AceEditor.ts","../../../projects/novo-elements/src/addons/ace-editor/AceEditorFormTemplate.ts","../../../projects/novo-elements/src/addons/ace-editor/AceEditor.module.ts","../../../projects/novo-elements/src/addons/ace-editor/novo-elements-addons-ace-editor.ts"],"sourcesContent":["// NG2\nimport { Component, ElementRef, EventEmitter, forwardRef, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n// Vendor\n// organize-imports-ignore\nimport 'brace/index';\nimport 'brace/mode/javascript';\nimport 'brace/theme/chrome';\nimport 'brace/ext/language_tools.js';\n// APP\nimport { Helpers } from 'novo-elements/utils';\n\ndeclare var ace: any;\n\nconst ACE_VALUE_ACCESSOR = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => NovoAceEditor),\n  multi: true,\n};\n\n@Component({\n  selector: 'novo-ace-editor',\n  template: '',\n  styleUrls: ['./AceEditor.scss'],\n  providers: [ACE_VALUE_ACCESSOR],\n})\nexport class NovoAceEditor implements ControlValueAccessor, OnInit, OnDestroy {\n  @Input()\n  set theme(theme: any) {\n    this.setTheme(theme);\n  }\n\n  @Input()\n  set options(options: any) {\n    this.setOptions(options);\n  }\n\n  @Input()\n  set mode(mode: any) {\n    this.setMode(mode);\n  }\n\n  @Input()\n  name: string;\n  @Output()\n  blur = new EventEmitter();\n  @Output()\n  focus = new EventEmitter();\n\n  private _options: any = {\n    showPrintMargin: false,\n    displayIndentGuides: true,\n  };\n  private _theme: string = 'chrome';\n  private _mode: string = 'javascript';\n\n  private text: string = '';\n  private oldText: string;\n  private editor: any;\n\n  private onChange = (_: any) => {};\n  private onTouched = () => {};\n\n  constructor(private elementRef: ElementRef) {}\n\n  ngOnDestroy() {\n    if (this.editor) {\n      this.editor.destroy();\n    }\n  }\n\n  ngOnInit() {\n    this.initializeEditor();\n    this.initializeOptions();\n    this.initializeEvents();\n  }\n\n  private initializeEditor() {\n    const el = this.elementRef.nativeElement;\n    this.editor = ace.edit(el);\n    this.editor.$blockScrolling = Infinity;\n  }\n\n  private initializeOptions() {\n    this.setOptions(this._options || {});\n    this.setTheme(this._theme);\n    this.setMode(this._mode);\n  }\n\n  private initializeEvents() {\n    this.editor.on('focus', (event) => this.focus.emit(event));\n    this.editor.on('blur', (event) => this.focus.emit(event));\n    this.editor.on('change', () => this.updateText());\n    this.editor.on('paste', () => this.updateText());\n  }\n\n  private updateText() {\n    const newVal = this.editor.getValue();\n\n    if (newVal === this.oldText) {\n      return;\n    }\n\n    this.text = newVal;\n    this.onChange(newVal);\n    this.oldText = newVal;\n  }\n\n  private setText(text: string) {\n    if (Helpers.isBlank(text)) {\n      text = '';\n    }\n    if (this.text !== text) {\n      this.text = text;\n      this.editor.setValue(text);\n      this.onChange(text);\n      this.editor.clearSelection();\n    }\n  }\n\n  private setOptions(options: any) {\n    this._options = options;\n    this.editor.setOptions(options || {});\n  }\n\n  private setTheme(theme: string) {\n    this._theme = theme;\n    this.editor.setTheme(`ace/theme/${theme}`);\n  }\n\n  private setMode(mode: any) {\n    this._mode = mode;\n    this.editor.getSession().setMode(`ace/mode/${this._mode}`);\n  }\n\n  writeValue(value: any) {\n    this.setText(value);\n  }\n\n  registerOnChange(fn: any) {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any) {\n    this.onTouched = fn;\n  }\n}\n","import { Component, ViewChild } from '@angular/core';\nimport { NovoTemplate } from 'novo-elements/elements/common';\nimport { TemplateHost } from 'novo-elements/utils';\n\n@Component({\n    template:\n    `<ng-template novoTemplate=\"ace-editor\" let-control let-form=\"form\" let-errors=\"errors\" let-methods=\"methods\">\n      <div [formGroup]=\"form\">\n        <novo-ace-editor\n          [name]=\"control.key\"\n          [formControlName]=\"control.key\"\n          (focus)=\"methods.handleFocus($event)\"\n          (blur)=\"methods.handleBlur($event)\"\n        ></novo-ace-editor>\n      </div>\n    </ng-template>`,\n    selector: 'internal-novo-code-editor-template'\n})\nexport class NovoAceEditorFormTemplate implements TemplateHost {\n    @ViewChild(NovoTemplate)\n    template: NovoTemplate;\n}","// NG2\nimport { CommonModule } from '@angular/common';\nimport { NgModule, NgModuleRef } from '@angular/core';\n// APP\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { NovoCommonModule } from 'novo-elements/elements/common';\nimport { DYNAMIC_FORM_TEMPLATE, DynamicFormTemplateArgs } from 'novo-elements/utils';\nimport { NovoAceEditor } from './AceEditor';\nimport { NovoAceEditorFormTemplate } from './AceEditorFormTemplate';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, ReactiveFormsModule, NovoCommonModule],\n  declarations: [NovoAceEditor, NovoAceEditorFormTemplate],\n  exports: [NovoAceEditor],\n  providers: [\n    {\n        provide: DYNAMIC_FORM_TEMPLATE,\n        multi: true,\n        deps: [NgModuleRef],\n        useFactory: (mod) => {\n            return {\n                type: NovoAceEditorFormTemplate,\n                ngModuleRef: mod\n            } as DynamicFormTemplateArgs;\n        }\n    }\n]\n})\nexport class NovoAceEditorModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i1.NovoAceEditor"],"mappings":"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"}